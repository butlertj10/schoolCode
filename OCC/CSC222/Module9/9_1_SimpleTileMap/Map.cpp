#include "Map.h"

Map::Map()
{
    tileWidth = -1;
    tileHeight = -1;
    width = -1;
    height = -1;
}

Map::~Map()
{

}

bool Map::init(char imageName[])
{
    tileWidth = 32;
    tileHeight = 32;
    width = 27;
    height = 20;

    if(!tiles.load(imageName, tileWidth, tileHeight))
        return false;

    return true;
}

void Map::draw(Graphics* g)
{
    int data[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 37, 37, 37, 0, 0, 37, 37, 37, 0, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 37, 0, 0, 37, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 0, 37, 0, 0, 37, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 37, 37, 37, 0, 0, 37, 0, 0, 37, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 0, 37, 0, 0, 37, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 37, 0, 0, 37, 0, 37, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 37, 37, 37, 0, 0, 37, 37, 37, 0, 0, 37, 37, 37, 37, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 66, 67, 68, 69, 70, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 66, 67, 68, 69, 70, 0, 0,
        0, 0, 0, 83, 84, 85, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 84, 85, 0, 0, 0,
        0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 0, 0, 0, 0,
        0, 0, 0, 0, 116, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 116, 0, 0, 0, 0,
        0, 0, 0, 0, 132, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 132, 0, 0, 0, 0,
        0, 0, 0, 0, 148, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 148, 0, 0, 0, 0,
        0, 0, 0, 163, 164, 165, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 163, 164, 165, 0, 0, 0,
        104, 105, 105, 105, 105, 105, 105, 106, 0, 104, 105, 105, 105, 105, 105, 105, 105, 106, 0, 104, 105, 105, 105, 105, 105, 105, 106,
        120, 121, 121, 121, 121, 121, 121, 122, 0, 120, 121, 121, 121, 121, 121, 121, 121, 122, 0, 120, 121, 121, 121, 121, 121, 121, 122};

    for(int y = 0; y < height; y++)
    {
        for(int x = 0; x < width; x++)
        {
            int frame = data[y*width+x];
            frame--;

            if(frame >= 0)
                tiles.draw(x*tileWidth, y*tileHeight, frame, g);
        }
    }
}

void Map::free()
{
    tiles.free();
}

